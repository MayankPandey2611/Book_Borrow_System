{% extends 'base.html' %}
{% load static %}
{% block title %}Student Dashboard{% endblock %}

{% block content %}
<div class="container mt-4">

    <!-- Available Books Table -->
    <div class="card p-4 shadow-sm mb-4 custom-card">
        <h4 class="mb-3 text-light">ðŸ“š Available Books</h4>
        <div class="table-responsive">
            <table class="table table-dark table-hover align-middle custom-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Author</th>
                        
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for book in books %}
                    <tr>
                        <td>{{ book.title }}</td>
                        <td>{{ book.author }}</td>
                        <td>{{ book.status|yesno:"Available,Borrowed" }}</td>
                        <td>
                            <a href="{% url 'borrow_book' book.id %}" class="btn btn-glow btn-sm" style="text-decoration: none;">Borrow</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center text-muted">No books found</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Books Card View -->
    <div class="mb-5">
        <h3 class="mb-4 text-light">ðŸ“š Explore Books</h3>
        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
            {% for book in books %}
            <div class="col">
                <div class="card h-100 shadow-lg custom-card">
                    {% if book.image %}
                        <img src="{{ book.image.url }}" class="card-img-top book-img" alt="{{ book.title }}">
                    {% else %}
                        <img src="{% static 'images/ramayan.jpg' %}" class="card-img-top book-img" alt="No image available">
                    {% endif %}
                    <div class="card-body d-flex flex-column justify-content-between">
                        <h5 class="card-title text-light">{{ book.title }}</h5>
                        <a href="{% url 'borrow_book' book.id %}" class="btn btn-glow mt-auto" style="text-decoration: none;">Issue Book</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Borrowed Books Table -->
    <div class="card p-4 shadow-sm custom-card">
        <h4 class="mb-3 text-light">ðŸ“– Your Borrowed Books</h4>
        <div class="table-responsive">
            <table class="table table-dark table-hover align-middle custom-table">
                <thead>
                    <tr>
                        <th>Book</th>
                        <th>Borrow Date</th>
                        <th>Return Book</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in borrowed %}
                    <tr>
                        <td>{{ record.book.title }}</td>
                        <td>{{ record.borrow_date }}</td>
                        <td>
                            <a href="{% url 'return_book' record.id %}" class="btn btn-glow-danger btn-sm" style="text-decoration: none;">Return</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" class="text-center text-muted">No borrowed books</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>
{% endblock %}
